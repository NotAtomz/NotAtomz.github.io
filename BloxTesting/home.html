<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Beyond Limits On Xtreme - Home</title>
    <style>
        :root{
            --bg:#e9eef5;
            --panel:#f7f9fc;
            --muted:#7e8b97;
            --accent:#d32f2f;
            --border:#c9d4df;
            --card:#fff;
            font-family:"Trebuchet MS",Tahoma,Arial,sans-serif;
        }
        html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#cfd9e6 60%);}
        header{
            height:66px;background:linear-gradient(#f5f7fa,#e6eef9);
            border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;
            padding:0 18px;box-sizing:border-box;
        }
        .logo{display:flex;align-items:center;gap:10px;font-weight:700;color:#222;letter-spacing:2px;font-size:20px;}
        .logo-mark{width:68px;height:30px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;box-shadow:0 1px 0 rgba(0,0,0,0.05);transform:skewX(-6deg);}
        nav{display:flex;gap:8px;align-items:center;}
        .tabs{list-style:none;margin:0;padding:0;display:flex;gap:8px;}
        .tabs li{padding:8px 12px;border-radius:4px;background:transparent;color:#1b2736;cursor:pointer;font-weight:700}
        .tabs li.active{background:#1b73b8;color:#fff}
        .top-right{display:flex;align-items:center;gap:12px}
        .container{width:980px;max-width:95%;margin:56px auto 48px;display:flex;gap:28px;align-items:flex-start}
        .main-panel{flex:1;background:linear-gradient(180deg,#fff,#f2f7ff);border:1px solid var(--border);padding:24px;border-radius:4px;box-shadow:0 6px 18px rgba(18,35,64,0.06)}
        .side-panel{width:320px;background:var(--panel);border:1px solid var(--border);padding:18px;border-radius:4px;box-shadow:0 4px 10px rgba(18,35,64,0.06)}
        h1{margin:0 0 8px 0;font-size:24px;color:#1b2736}
        .subtitle{color:var(--muted);margin-bottom:12px}
        .welcome-username{font-size:18px;font-weight:800;margin:6px 0 0 0}
        .games-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:14px}
        .game-card{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:10px;display:flex;gap:10px;cursor:pointer;transition:transform .12s}
        .game-card:hover{transform:translateY(-4px)}
        .thumb{width:92px;height:68px;background:#dfe7f4;border-radius:3px;flex-shrink:0;display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700}
        .game-meta{flex:1}
        .game-title{font-weight:800;margin:0 0 6px 0}
        .game-creator{font-size:12px;color:var(--muted);margin-bottom:8px}
        .game-players{font-size:12px;color:var(--muted)}
        .small{font-size:13px;color:var(--muted)}
        .profile-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
        .btn{background:#1b73b8;color:#fff;border:none;padding:9px 12px;border-radius:3px;cursor:pointer;font-weight:700}
        .btn.alt{background:#fff;color:#1b2736;border:1px solid var(--border);font-weight:600}
        .tabs-right{font-size:13px;color:var(--muted)}
        /* Modal */
        .modal-backdrop{position:fixed;inset:0;background:rgba(10,20,40,0.45);display:none;align-items:center;justify-content:center;z-index:60}
        .modal{width:640px;max-width:95%;background:#fff;border-radius:6px;padding:18px;border:1px solid var(--border);box-shadow:0 12px 40px rgba(18,35,64,0.35)}
        .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .modal-body{display:flex;gap:14px}
        .modal-thumb{width:220px;height:140px;background:#eef4ff;border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--muted)}
        .modal-info{flex:1}
        .close-x{background:transparent;border:none;font-size:18px;cursor:pointer;color:var(--muted)}
        @media (max-width:880px){
            .container{flex-direction:column}
            .side-panel{width:100%}
            .games-list{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-mark">BLOX</div>
            <div>
                <div style="font-size:12px;color:var(--muted);letter-spacing:0">PLAY & CREATE</div>
                <div style="font-weight:800;font-size:14px">Beyond Limits On Xtreme</div>
            </div>
        </div>

        <div class="top-right">
            <nav>
                <ul class="tabs" id="topTabs">
                    <li data-tab="home" class="active">Home</li>
                    <li data-tab="avatar">Avatar</li>
                    <li data-tab="games">Games</li>
                    <li data-tab="download">Download</li>
                    <li data-tab="settings">Settings</li>
                </ul>
            </nav>
            <div class="tabs-right" id="userArea">
                <!-- username inserted by JS -->
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="main-panel" id="contentHome">
                <h1>Welcome to BLOX</h1>
                <div class="subtitle">Build, play and explore user-created worlds.</div>

                <div style="margin-top:6px">
                    <div style="font-size:13px;color:var(--muted)">Logged in as</div>
                    <div class="welcome-username" id="welcomeName">Guest</div>
                </div>

                <div style="margin-top:18px">
                    <div style="display:flex;align-items:center;justify-content:space-between">
                        <div style="font-weight:800">Featured Games</div>
                        <div class="small" id="gamesHint">Click a game to view details</div>
                    </div>

                    <div class="games-list" id="gamesList">
                        <!-- populated by JS -->
                    </div>
                </div>
            </section>

            <aside class="side-panel" id="sidePanel">
                <div class="profile-row">
                    <div>
                        <div style="font-size:12px;color:var(--muted)">Account</div>
                        <div style="font-weight:800" id="sideName">Guest</div>
                    </div>
                    <div>
                        <button class="btn alt" id="setNameBtn">Set Name</button>
                    </div>
                </div>

                <div style="margin-top:14px" class="small">Quick Links</div>
                <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
                    <button class="btn" id="openGamesBtn">Browse Games</button>
                    <button class="btn alt" id="openAvatarBtn">Customize Avatar</button>
                </div>
            </aside>
        </div>
    </main>

    <!-- Game Modal -->
    <div class="modal-backdrop" id="modalRoot" role="dialog" aria-hidden="true">
        <div class="modal" role="document">
            <div class="modal-header">
                <div style="font-weight:800" id="modalTitle">Game Title</div>
                <div>
                    <button class="close-x" id="modalCloseBtn" aria-label="Close">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="modal-thumb" id="modalThumb">THUMB</div>
                <div class="modal-info">
                    <div style="color:var(--muted);margin-bottom:8px" id="modalCreator">by Creator</div>
                    <div id="modalDesc" style="margin-bottom:12px;color:#1b2736">Game description goes here.</div>
                    <div style="display:flex;gap:8px;align-items:center">
                        <button class="btn" id="playBtn">Play</button>
                        <button class="btn alt" id="closeBtn">Close</button>
                        <div style="margin-left:auto;font-size:13px;color:var(--muted)" id="modalPlayers">0 playing</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Demo data: single game template
        const games = [
            {
                id: 'g1',
                title: 'Skyblock Adventures',
                creator: 'BuilderSam',
                players: 128,
                thumbText: 'SKY',
                desc: 'Explore floating islands, gather resources and build your empire. Cooperative and competitive modes.',
                playUrl: '#' // replace with real game URL if available
            }
        ];

        // Elements
        const tabs = document.getElementById('topTabs');
        const topTabs = tabs.querySelectorAll('li');
        const contentHome = document.getElementById('contentHome');
        const gamesList = document.getElementById('gamesList');
        const modalRoot = document.getElementById('modalRoot');
        const modalTitle = document.getElementById('modalTitle');
        const modalThumb = document.getElementById('modalThumb');
        const modalCreator = document.getElementById('modalCreator');
        const modalDesc = document.getElementById('modalDesc');
        const modalPlayers = document.getElementById('modalPlayers');
        const playBtn = document.getElementById('playBtn');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        const closeBtn = document.getElementById('closeBtn');
        const welcomeName = document.getElementById('welcomeName');
        const sideName = document.getElementById('sideName');
        const userArea = document.getElementById('userArea');

        // Load username from localStorage or fallback
        function loadUsername(){
            const name = localStorage.getItem('playfab_username') || localStorage.getItem('blox_username') || localStorage.getItem('playfab_id') || 'Guest';
            return name;
        }
        function renderUsername(){
            const name = loadUsername();
            welcomeName.textContent = name;
            sideName.textContent = name;
            userArea.textContent = name;
        }

        // Allow setting demo username (stores to localStorage for reuse)
        document.getElementById('setNameBtn').addEventListener('click', () => {
            const newName = prompt('Set your display name (3-16 chars, letters/numbers/_):', loadUsername());
            if(!newName) return;
            const ok = /^[a-zA-Z0-9_]{3,16}$/.test(newName);
            if(!ok){ alert('Invalid name.'); return; }
            localStorage.setItem('blox_username', newName);
            renderUsername();
        });

        // Populate games list (one template entry)
        function renderGames(){
            gamesList.innerHTML = '';
            games.forEach(g=>{
                const card = document.createElement('div');
                card.className = 'game-card';
                card.setAttribute('data-id', g.id);
                card.innerHTML = `
                    <div class="thumb">${g.thumbText}</div>
                    <div class="game-meta">
                        <div class="game-title">${g.title}</div>
                        <div class="game-creator">by ${g.creator}</div>
                        <div class="game-players">${g.players} playing</div>
                    </div>
                `;
                card.addEventListener('click', ()=> openGameModal(g.id));
                gamesList.appendChild(card);
            });
        }

        // Modal logic
        let activeGame = null;
        function openGameModal(id){
            const g = games.find(x=>x.id===id);
            if(!g) return;
            activeGame = g;
            modalTitle.textContent = g.title;
            modalThumb.textContent = g.thumbText;
            modalCreator.textContent = 'by ' + g.creator;
            modalDesc.textContent = g.desc;
            modalPlayers.textContent = g.players + ' playing';
            modalRoot.style.display = 'flex';
            modalRoot.setAttribute('aria-hidden','false');
        }
        function closeGameModal(){
            modalRoot.style.display = 'none';
            modalRoot.setAttribute('aria-hidden','true');
            activeGame = null;
        }

        // Play action
        playBtn.addEventListener('click', ()=>{
            if(!activeGame) return;
            // Simulate launching: navigate or open new window. Here we open a new tab with playUrl.
            if(activeGame.playUrl && activeGame.playUrl !== '#'){
                window.open(activeGame.playUrl, '_blank');
            } else {
                // Demo fallback
                alert('Launching "' + activeGame.title + '"...');
            }
        });

        modalCloseBtn.addEventListener('click', closeGameModal);
        closeBtn.addEventListener('click', closeGameModal);
        modalRoot.addEventListener('click', (e)=>{
            if(e.target === modalRoot) closeGameModal();
        });

        // Tabs switching (only changes main content area for demo)
        topTabs.forEach(tab=>{
            tab.addEventListener('click', ()=>{
                topTabs.forEach(t=>t.classList.remove('active'));
                tab.classList.add('active');
                const key = tab.getAttribute('data-tab');
                switch(key){
                    case 'home':
                        contentHome.querySelector('h1').textContent = 'Welcome to BLOX';
                        renderGames();
                        break;
                    case 'avatar':
                        contentHome.querySelector('h1').textContent = 'Avatar';
                        contentHome.querySelector('.subtitle').textContent = 'Customize your avatar (demo)';
                        gamesList.innerHTML = '<div class="small">Avatar editor not implemented in demo.</div>';
                        break;
                    case 'games':
                        contentHome.querySelector('h1').textContent = 'Games';
                        contentHome.querySelector('.subtitle').textContent = 'Browse and play games';
                        renderGames();
                        break;
                    case 'download':
                        window.location.href = 'download.html';
                        break;
                    case 'settings':
                        contentHome.querySelector('h1').textContent = 'Settings';
                        contentHome.querySelector('.subtitle').textContent = 'Account & client settings';
                        gamesList.innerHTML = '<div class="small">Settings panel not implemented in demo.</div>';
                        break;
                }
            });
        });

        // Quick side buttons
        document.getElementById('openGamesBtn').addEventListener('click', ()=>{
            document.querySelector('li[data-tab="games"]').click();
        });
        document.getElementById('openAvatarBtn').addEventListener('click', ()=>{
            document.querySelector('li[data-tab="avatar"]').click();
        });

        // Init
        renderUsername();
        renderGames();
    </script>
</body>
</html>
